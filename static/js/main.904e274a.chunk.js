(this.webpackJsonpbookstore=this.webpackJsonpbookstore||[]).push([[0],{17:function(e,t,a){e.exports={makeWrap:"Make_makeWrap__3JyrP",title:"Make_title__BRkW8",form:"Make_form__1PVYh",input:"Make_input__2NE7l",buttonBox:"Make_buttonBox__37itK",addButton:"Make_addButton__2LLfE",addButtonPrev:"Make_addButtonPrev__2Nk1i"}},20:function(e,t,a){e.exports={joinWrap:"Join_joinWrap__3s1MB",title:"Join_title__2D-mZ",join_input:"Join_join_input___Z-l-",submit:"Join_submit__32KVz",home:"Join_home__1fOOg",alertMessageError:"Join_alertMessageError__1nR-T",alertMessageSccess:"Join_alertMessageSccess__vjQ1b"}},21:function(e,t,a){e.exports={title:"Login_title__fiWtY",loginBox:"Login_loginBox__2Fc5f",inputBox:"Login_inputBox__2Wca2",submit:"Login_submit__T2hSO",newjoin:"Login_newjoin__m-XbY",errorMessage:"Login_errorMessage__2e5MF"}},46:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a.n(n),c=a(37),s=a.n(c),i=(a(46),a(23)),r=a(8),u=a(41),l=a(12),b=a(9),j=a.n(b),_=a(2),h=function(e){var t=e.name,a=e.publisher,n=e.publisherDate,o=e.onCheck,c=e.rental;return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{children:Object(_.jsx)("input",{className:j.a.checkbox,type:"checkbox",name:"check",onClick:function(e){o(e,t)}})}),Object(_.jsx)("td",{children:t}),Object(_.jsx)("td",{children:a}),Object(_.jsx)("td",{children:n}),Object(_.jsx)("td",{children:Object(_.jsx)("span",{className:j.a.stateBook,children:c&&"\u2714 ".concat(c)})})]})},d=function(e){var t,a=e.authService,o=e.dataService,c=Object(r.f)(),s=Object(n.useState)(""),i=Object(l.a)(s,2),b=(i[0],i[1]),d=Object(n.useState)(!1),O=Object(l.a)(d,2),p=O[0],m=O[1],k=Object(n.useState)({}),x=Object(l.a)(k,2),f=x[0],B=x[1],v=Object(n.useState)(""),S=Object(l.a)(v,2),A=S[0],E=S[1],N=Object(n.useState)([]),g=Object(l.a)(N,2),P=g[0],C=g[1],L=function(e,t){e.target.closest("tr").classList.toggle(j.a.check),e.target.checked?C([].concat(Object(u.a)(P),[t])):C(P.filter((function(e){return e!==t})))};return Object(n.useEffect)((function(){a.onAuthChange((function(e){e&&b(e),E(null===e||void 0===e?void 0:e.email),e||c.push("/")}))}),[a,c,P]),Object(n.useEffect)((function(){o.getUserData((function(e){B(e),m(!0)}))}),[o,p]),Object(_.jsxs)("section",{className:j.a.booklist,children:[null!==A&&Object(_.jsxs)("h1",{className:j.a.user,children:[Object(_.jsx)("span",{children:A})," \ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4. \ud83d\ude0a"]}),Object(_.jsx)("h2",{className:j.a.system,children:"\ud83d\udcd6 \ub3c4\uc11c\uad00\ub9ac \uc2dc\uc2a4\ud15c "}),Object(_.jsx)("div",{className:j.a.bookBox,children:Object(_.jsxs)("table",{className:j.a.bookListTbl,children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:j.a.checked}),Object(_.jsx)("th",{className:j.a.bookName,children:"\ucc45\uc774\ub984"}),Object(_.jsx)("th",{className:j.a.publisher,children:"\ucd9c\ud310\uc0ac"}),Object(_.jsx)("th",{className:j.a.date,children:"\ubc1c\ud589\uc77c"}),Object(_.jsx)("th",{className:j.a.status,children:"\ub300\uc5ec\uc5ec\ubd80"})]})}),Object(_.jsx)("tbody",{children:p&&(null===(t=Object.keys(f))||void 0===t?void 0:t.map((function(e){var t=f[e],a=t.name,n=t.publisher,o=t.publisherDate,c=t.rental;return Object(_.jsx)(h,{name:a,publisher:n,publisherDate:o,rental:c,emailName:A,onCheck:L},e)})))})]})}),Object(_.jsxs)("div",{className:j.a.buttonBox,children:[Object(_.jsx)("button",{type:"button",className:j.a.rentalBook,onClick:function(){null===P||void 0===P||P.map((function(e){if(!f[e].rental)return o.getUpdateData(f,e,A)}))},children:"\ud83d\uded2 \ube4c\ub824\uac00\uae30"}),Object(_.jsx)("button",{type:"button",className:j.a.returnBook,onClick:function(){null===P||void 0===P||P.map((function(e){if(f[e].rental===A)return o.getUpdateData(f,e,"")}))},children:"\ud83d\udd04 \ubc18\ub0a9\ud558\uae30"}),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{type:"button",className:j.a.addBook,onClick:function(){c.push("/Make")},children:"\ud83d\udccc \ub3c4\uc11c\ucd94\uac00"}),Object(_.jsx)("button",{type:"button",className:j.a.removeBook,onClick:function(){null===P||void 0===P||P.map((function(e){return o.removeData(e)}))},children:"\u274c \ub3c4\uc11c\uc0ad\uc81c"})]}),Object(_.jsx)("button",{type:"button",className:j.a.logoutBox,onClick:function(){a.logout()},children:"\ud83d\udd34 \ub85c\uadf8\uc544\uc6c3"})]})]})},O=a(18),p=a(15),m=a(20),k=a.n(m),x=function(e){var t=e.authService,a=Object(r.f)(),o=Object(n.useState)({joinID:"",joinPW:""}),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(""),b=Object(l.a)(u,2),j=b[0],h=b[1],d=function(e){i(Object(p.a)(Object(p.a)({},s),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:k.a.joinWrap,children:[Object(_.jsx)("h1",{className:k.a.title,children:"\ud68c\uc6d0\uac00\uc785"}),Object(_.jsx)("button",{type:"button",className:k.a.home,onClick:function(){a.push("/")},children:"\ud648\uc73c\ub85c"}),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.newJoin(s.joinID,s.joinPW).then((function(e){alert("Success full")})).catch((function(e){h(e.message)}))},children:[Object(_.jsx)("div",{className:k.a.join_input,children:Object(_.jsx)("input",{placeholder:"EMAIL",type:"text",name:"joinID",onChange:d})}),Object(_.jsx)("div",{className:k.a.join_input,children:Object(_.jsx)("input",{placeholder:"PASSWORD",type:"password",name:"joinPW",onChange:d})}),Object(_.jsx)("div",{className:k.a.alertMessageError,children:j}),Object(_.jsx)("button",{type:"submit",className:k.a.submit,children:"\ud68c\uc6d0\uac00\uc785"})]})]})})},f=a(21),B=a.n(f),v=function(e){var t=e.authService,a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(r.f)(),u=function(e){i.push({pathname:"/BookList",state:{id:e}})},b=Object(n.useState)({userId:"",userPassword:""}),j=Object(l.a)(b,2),h=j[0],d=j[1],m=function(e){d(Object(p.a)(Object(p.a)({},h),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){t.onAuthChange((function(e){e&&u(e.uid)}))})),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h1",{className:B.a.title,children:"\ud83d\udcd4 Book Store"}),Object(_.jsx)("div",{className:B.a.loginBox,children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.login(h.userId,h.userPassword).then((function(e){return u(e.user.uid)})).catch((function(e){s(e.message)}))},children:[Object(_.jsx)("div",{className:B.a.inputBox,children:Object(_.jsx)("input",{type:"text",placeholder:"ID",name:"userId",value:h.userId,onChange:m})}),Object(_.jsx)("div",{className:B.a.inputBox,children:Object(_.jsx)("input",{type:"password",placeholder:"PASSWORD",name:"userPassword",value:h.userPassword,onChange:m})}),Object(_.jsx)("p",{className:B.a.errorMessage,children:c}),Object(_.jsx)("button",{type:"submit",className:B.a.submit,children:"\ub85c\uadf8\uc778"})]})}),Object(_.jsx)("button",{type:"button",className:B.a.newjoin,onClick:function(){i.push("/Join")},children:"\ud68c\uc6d0\uac00\uc785"})]})},S=a(17),A=a.n(S),E=function(e){e.authService;var t=e.dataService,a=Object(n.useState)({name:"",publisher:"",publisherDate:"",rental:""}),o=Object(l.a)(a,2),c=o[0],s=o[1],i=function(e){s(Object(p.a)(Object(p.a)({},c),{},Object(O.a)({},e.target.name,e.target.value)))},u=function(){b.push("/BookList")},b=Object(r.f)();return Object(_.jsxs)("div",{className:A.a.makeWrap,children:[Object(_.jsx)("h1",{className:A.a.title,children:"\ub3c4\uc11c\ucd94\uac00"}),Object(_.jsx)("div",{className:A.a.form,children:Object(_.jsx)("input",{className:A.a.input,type:"text",name:"name",value:c.name,placeholder:"\ucc45\uc774\ub984",onChange:i})}),Object(_.jsx)("div",{className:A.a.form,children:Object(_.jsx)("input",{className:A.a.input,type:"text",name:"publisher",value:c.publisher,placeholder:"\ucd9c\ud310\uc0ac",onChange:i})}),Object(_.jsx)("div",{className:A.a.form,children:Object(_.jsx)("input",{className:A.a.input,type:"date",min:"1950-01-01",max:"9999-12-31",name:"publisherDate",onChange:i})}),Object(_.jsxs)("div",{className:A.a.buttonBox,children:[Object(_.jsx)("button",{type:"button",className:A.a.addButtonPrev,onClick:u,children:"\uc774\uc804"}),Object(_.jsx)("button",{type:"button",className:A.a.addButton,onClick:function(){c.name&&c.publisher?(t.writeUserData(c.name,c),u()):alert("\uac12\uc744 \uc785\ub825\ud558\uc138\uc694")},children:"\ucd94\uac00"})]})]})};var N=function(e){var t=e.authService,a=e.dataService;return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(i.a,{children:Object(_.jsxs)(r.c,{children:[Object(_.jsx)(r.a,{exact:!0,path:"/",basename:"",children:Object(_.jsx)(v,{authService:t})}),Object(_.jsx)(r.a,{path:"/Join",basename:"",children:Object(_.jsx)(x,{authService:t})}),Object(_.jsx)(r.a,{path:"/Login",basename:"",children:Object(_.jsx)(v,{authService:t})}),Object(_.jsx)(r.a,{path:"/BookList",children:Object(_.jsx)(d,{authService:t,dataService:a})}),Object(_.jsx)(r.a,{path:"/Make",basename:"",children:Object(_.jsx)(E,{authService:t,dataService:a})})]})})})},g=a(28),P=a(29),C=a(40),L={apiKey:"AIzaSyB941NwNthBQ8cX5fSHc8s9FHWGaSVAw-c",authDomain:"bookstore-270ac.firebaseapp.com",projectId:"bookstore-270ac",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DATABASE_URL:"https://bookstore-270ac-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyB941NwNthBQ8cX5fSHc8s9FHWGaSVAw-c",REACT_APP_FIREBASE_AUTH_DOMAIN:"bookstore-270ac.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"bookstore-270ac",REACT_APP_STORAGE_BUCKET:"bookstore-270ac.appspot.com"}).REACT_APP_FIREBASE_DATABASE_URL,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DATABASE_URL:"https://bookstore-270ac-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyB941NwNthBQ8cX5fSHc8s9FHWGaSVAw-c",REACT_APP_FIREBASE_AUTH_DOMAIN:"bookstore-270ac.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"bookstore-270ac",REACT_APP_STORAGE_BUCKET:"bookstore-270ac.appspot.com"}).REACT_APP_FIREBASE_STORAGE_BUCKET},T=C.a.initializeApp(L),R=function(){function e(){Object(g.a)(this,e)}return Object(P.a)(e,[{key:"newJoin",value:function(e,t){return T.auth().createUserWithEmailAndPassword(e,t)}},{key:"login",value:function(e,t){return T.auth().signInWithEmailAndPassword(e,t)}},{key:"onAuthChange",value:function(e){T.auth().onAuthStateChanged((function(t){e(t)}))}},{key:"logout",value:function(){T.auth().signOut()}}]),e}(),D=a(34),y=a.n(D),I=a(39),w=T.database(),W=function(){function e(){Object(g.a)(this,e)}return Object(P.a)(e,[{key:"writeUserData",value:function(e,t){w.ref("bookStore/".concat(e,"/")).set(t)}},{key:"getUserData",value:function(e){w.ref("bookStore/").on("value",function(){var t=Object(I.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.val(),t.t0=a.val(),!t.t0){t.next=5;break}return t.next=5,e(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"getUpdateData",value:function(e,t,a){var n=Object(p.a)(Object(p.a)({},e[t]),{},{rental:a});w.ref("bookStore/".concat(t)).update(n)}},{key:"removeData",value:function(e){w.ref("bookStore/".concat(e)).remove()}}]),e}(),M=new R,F=new W;s.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(N,{authService:M,dataService:F})}),document.getElementById("root"))},9:function(e,t,a){e.exports={booklist:"BookList_booklist__Jrp1Y",user:"BookList_user__tB0ez",buttonBox:"BookList_buttonBox__p1ctL",bookBox:"BookList_bookBox__ZaYa7",logoutBox:"BookList_logoutBox__3UMsr",removeBook:"BookList_removeBook__1eTI0",addBook:"BookList_addBook__33MpW",returnBook:"BookList_returnBook__aEWNm",rentalBook:"BookList_rentalBook__3pqws",bookListTbl:"BookList_bookListTbl__3AyR1",check:"BookList_check__1vOAW",stateBook:"BookList_stateBook__2epN1",checkbox:"BookList_checkbox__2Xu76",checked:"BookList_checked__1Fuv6",bookName:"BookList_bookName__2ScnI",publisher:"BookList_publisher__WSf8b",date:"BookList_date__199KK",status:"BookList_status__3Qewm",input:"BookList_input__35N6A"}}},[[56,1,2]]]);
//# sourceMappingURL=main.904e274a.chunk.js.map