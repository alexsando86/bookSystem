{"version":3,"sources":["components/Make/Make.module.css","components/Join/Join.module.css","components/Login/Login.module.css","components/BookList/BookList.jsx","components/Join/Join.jsx","components/Login/Login.jsx","components/Make/Make.jsx","App.js","service/firebase.js","service/auth_service.js","service/db.js","index.js","components/BookList/BookList.module.css"],"names":["module","exports","TableList","name","publisher","publisherDate","onCheck","rental","className","styles","checkbox","type","onClick","e","stateBook","BookList","authService","dataService","administrator","history","useHistory","useState","user","setUser","isLoading","setIsLoading","tableLine","setTableLine","emailName","setEmailName","currentBookName","setCurrentBookName","target","closest","classList","toggle","check","checked","filter","item","useEffect","onAuthChange","email","push","getUserData","update","booklist","system","bookBox","bookListTbl","bookName","date","status","Object","keys","map","key","buttonBox","rentalBook","getUpdateData","returnBook","uid","addBook","removeBook","removeData","logoutBox","logout","Join","joinID","joinPW","joinUser","setJoinUser","alertMsg","setAlertMsg","onChange","value","joinWrap","title","home","onSubmit","preventDefault","newJoin","then","data","alert","catch","error","message","join_input","placeholder","alertMessageError","submit","Login","goToBookList","userId","pathname","state","id","userPassword","setValue","event","loginBox","login","inputBox","errorMessage","newjoin","Make","bookData","setBookData","makeWrap","form","input","min","max","addButtonPrev","addButton","writeUserData","replace","App","basename","exact","path","firebaseConfig","apiKey","process","authDomain","projectId","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","firebaseApp","firebase","initializeApp","AuthService","password","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","onUserChanged","onAuthStateChanged","signOut","database","DataService","ref","set","on","snapshot","a","val","updates","remove","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0FACAA,EAAOC,QAAU,CAAC,SAAW,uBAAuB,MAAQ,oBAAoB,KAAO,mBAAmB,MAAQ,oBAAoB,UAAY,wBAAwB,UAAY,wBAAwB,cAAgB,8B,mBCA9ND,EAAOC,QAAU,CAAC,SAAW,uBAAuB,MAAQ,oBAAoB,WAAa,yBAAyB,OAAS,qBAAqB,KAAO,mBAAmB,kBAAoB,gCAAgC,mBAAqB,mC,mBCAvPD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,SAAW,wBAAwB,SAAW,wBAAwB,OAAS,sBAAsB,QAAU,uBAAuB,aAAe,8B,+JCgI9LC,EAAY,SAAC,GAAyD,IAAvDC,EAAsD,EAAtDA,KAAMC,EAAgD,EAAhDA,UAAWC,EAAqC,EAArCA,cAAeC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,OAC7D,OACC,+BACC,6BACC,uBACCC,UAAWC,IAAOC,SAClBC,KAAK,WACLR,KAAK,QACLS,QAAS,SAACC,GACTP,EAAQO,EAAGV,QAId,6BAAKA,IACL,6BAAKC,IACL,6BAAKC,IACL,6BACC,sBAAMG,UAAWC,IAAOK,UAAxB,SAAoCP,GAAM,iBAASA,WAMxCQ,EApJE,SAAC,GAAkC,IAAD,EAA/BC,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,YAC1BC,EAAgB,+BAChBC,EAAUC,cAFkC,EAG1BC,mBAAS,IAHiB,mBAG3CC,EAH2C,KAGrCC,EAHqC,OAIhBF,oBAAS,GAJO,mBAI3CG,EAJ2C,KAIhCC,EAJgC,OAKhBJ,mBAAS,IALO,mBAK3CK,EAL2C,KAKhCC,EALgC,OAMhBN,mBAAS,IANO,mBAM3CO,EAN2C,KAMhCC,EANgC,OAOJR,mBAAS,IAPL,mBAO3CS,EAP2C,KAO1BC,EAP0B,KAgB5CzB,EAAU,SAACO,EAAGV,GACnBU,EAAEmB,OAAOC,QAAQ,MAAMC,UAAUC,OAAO1B,IAAO2B,OAC3CvB,EAAEmB,OAAOK,QACZN,EAAmB,GAAD,mBAAKD,GAAL,CAAsB3B,KAExC4B,EAAmBD,EAAgBQ,QAAO,SAACC,GAAD,OAAUA,IAASpC,OAqD/D,OAlBAqC,qBAAU,WACTxB,EAAYyB,cAAa,SAACnB,GACzBA,GAAQC,EAAQD,GAChBO,EAAY,OAACP,QAAD,IAACA,OAAD,EAACA,EAAMoB,OACdpB,GACJH,EAAQwB,KAAK,UAGb,CAAC3B,EAAaG,EAASW,IAG1BU,qBAAU,WACTvB,EAAY2B,aAAY,SAACC,GACxBlB,EAAakB,GACbpB,GAAa,QAEZ,CAACR,EAAaO,IAGhB,0BAAShB,UAAWC,IAAOqC,SAA3B,UACgB,OAAdlB,GACA,qBAAIpB,UAAWC,IAAOa,KAAtB,UACC,+BAAOM,IADR,0DAID,oBAAIpB,UAAWC,IAAOsC,OAAtB,uEACA,qBAAKvC,UAAWC,IAAOuC,QAAvB,SACC,wBAAOxC,UAAWC,IAAOwC,YAAzB,UACC,gCACC,+BACC,oBAAIzC,UAAWC,IAAO4B,UACtB,oBAAI7B,UAAWC,IAAOyC,SAAtB,gCACA,oBAAI1C,UAAWC,IAAOL,UAAtB,gCACA,oBAAII,UAAWC,IAAO0C,KAAtB,gCACA,oBAAI3C,UAAWC,IAAO2C,OAAtB,2CAGF,gCAEE5B,IAAS,UACT6B,OAAOC,KAAK5B,UADH,aACT,EAAwB6B,KAAI,SAACC,GAAS,IAAD,EACe9B,EAAU8B,GAArDrD,EAD4B,EAC5BA,KAAMC,EADsB,EACtBA,UAAWC,EADW,EACXA,cAAeE,EADJ,EACIA,OACxC,OAAO,cAAC,EAAD,CAAqBJ,KAAMA,EAAMC,UAAWA,EAAWC,cAAeA,EAAeE,OAAQA,EAAQqB,UAAWA,EAAWtB,QAASA,GAApHkD,cAM5B,sBAAKhD,UAAWC,IAAOgD,UAAvB,UACC,wBAAQ9C,KAAK,SAASH,UAAWC,IAAOiD,WAAY9C,QAnErC,WACF,OAAfkB,QAAe,IAAfA,KAAiByB,KAAI,SAAAC,GACpB,IAAI9B,EAAU8B,GAAV,OACH,OAAOvC,EAAY0C,cAAcjC,EAAW8B,EAAK5B,OAgEjD,mDAGA,wBAAQjB,KAAK,SAASH,UAAWC,IAAOmD,WAAYhD,QA7DtC,WACD,OAAfkB,QAAe,IAAfA,KAAiByB,KAAI,SAAAC,GACpB,GAAG9B,EAAU8B,GAAV,SAA6B5B,GAAaN,EAAKuC,MAAQ3C,EACzD,OAAOD,EAAY0C,cAAcjC,EAAW8B,EAAK,QA0DjD,mDAGElC,EAAKuC,MAAQ3C,GACb,qCACA,wBAAQP,KAAK,SAASH,UAAWC,IAAOqD,QAASlD,QAvFpC,WACjBO,EAAQwB,KAAK,UAsFT,mDACA,wBAAQhC,KAAK,SAASH,UAAWC,IAAOsD,WAAYnD,QAnFpC,WACL,OAAfkB,QAAe,IAAfA,KAAiByB,KAAI,SAAChB,GACrB,OAAOtB,EAAY+C,WAAWzB,OAiF3B,gDAGF,wBAAQ5B,KAAK,SAASH,UAAWC,IAAOwD,UAAWrD,QA3GrC,WAChBI,EAAYkD,UA0GV,0D,iCC9DWC,EAvDF,SAAC,GAAqB,IAAnBnD,EAAkB,EAAlBA,YACTG,EAAUC,cADiB,EAKDC,mBAAS,CACxC+C,OAAQ,GACRC,OAAQ,KAPwB,mBAK1BC,EAL0B,KAKhBC,EALgB,OAUDlD,mBAAS,IAVR,mBAU1BmD,EAV0B,KAUhBC,EAVgB,KAY3BC,EAAW,SAAC7D,GACjB0D,EAAY,2BACRD,GADO,kBAETzD,EAAEmB,OAAO7B,KAAOU,EAAEmB,OAAO2C,UAgB5B,OACC,mCACC,sBAAKnE,UAAWC,IAAOmE,SAAvB,UACC,oBAAIpE,UAAWC,IAAOoE,MAAtB,sCACA,wBAAQlE,KAAK,SAASH,UAAWC,IAAOqE,KAAMlE,QAjChC,WAChBO,EAAQwB,KAAK,MAgCX,gCAGA,uBAAMoC,SAnBQ,SAAClE,GACjBA,EAAEmE,iBACFhE,EACEiE,QAAQX,EAASF,OAAQE,EAASD,QAClCa,MAAK,SAACC,GACNC,MAAM,mBAENC,OAAM,SAACC,GACPb,EAAYa,EAAMC,aAWlB,UACC,qBAAK/E,UAAWC,IAAO+E,WAAvB,SACC,uBAAOC,YAAY,QAAQ9E,KAAK,OAAOR,KAAK,SAASuE,SAAUA,MAEhE,qBAAKlE,UAAWC,IAAO+E,WAAvB,SACC,uBAAOC,YAAY,WAAW9E,KAAK,WAAWR,KAAK,SAASuE,SAAUA,MAEvE,qBAAKlE,UAAWC,IAAOiF,kBAAvB,SAA2ClB,IAC3C,wBAAQ7D,KAAK,SAASH,UAAWC,IAAOkF,OAAxC,+C,iBCkBUC,EAhED,SAAC,GAAqB,IAAnB5E,EAAkB,EAAlBA,YAAkB,EACFK,mBAAS,IADP,mBAC3BmD,EAD2B,KACjBC,EADiB,KAE5BtD,EAAUC,cACVyE,EAAe,SAACC,GACrB3E,EAAQwB,KAAK,CACZoD,SAAU,YACVC,MAAO,CAAEC,GAAIH,MANmB,EAcRzE,mBAAS,CAClCyE,OAAQ,GACRI,aAAc,KAhBmB,mBAc3BvB,EAd2B,KAcpBwB,EAdoB,KAmB5BzB,EAAW,SAAC0B,GACjBD,EAAS,2BACLxB,GADI,kBAENyB,EAAMpE,OAAO7B,KAAOiG,EAAMpE,OAAO2C,UAkBpC,OANAnC,qBAAU,WACTxB,EAAYyB,cAAa,SAACnB,GACzBA,GAAQuE,EAAavE,EAAKuC,WAK3B,qCACC,oBAAIrD,UAAWC,IAAOoE,MAAtB,qCACA,qBAAKrE,UAAWC,IAAO4F,SAAvB,SACC,uBAAMtB,SAlBO,SAACqB,GAChBA,EAAMpB,iBACNhE,EAAYsF,MAAM3B,EAAMmB,OAAQnB,EAAMuB,cAAchB,MAAK,SAACC,GAAD,OAAUU,EAAaV,EAAK7D,KAAKuC,QAAMwB,OAAM,SAAAC,GACrGb,EAAYa,EAAMC,aAejB,UACC,qBAAK/E,UAAWC,IAAO8F,SAAvB,SACC,uBAAO5F,KAAK,OAAO8E,YAAY,KAAKtF,KAAK,SAASwE,MAAOA,EAAMmB,OAAQpB,SAAUA,MAElF,qBAAKlE,UAAWC,IAAO8F,SAAvB,SACC,uBAAO5F,KAAK,WAAW8E,YAAY,WAAWtF,KAAK,eAAewE,MAAOA,EAAMuB,aAAcxB,SAAUA,MAExG,mBAAGlE,UAAWC,IAAO+F,aAArB,SAAoChC,IACpC,wBAAQ7D,KAAK,SAASH,UAAWC,IAAOkF,OAAxC,qCAKF,wBAAQhF,KAAK,SAASH,UAAWC,IAAOgG,QAAS7F,QA/ClC,WAChBO,EAAQwB,KAAK,UA8CZ,0C,iBCVY+D,EA/CF,SAAC,GAA+B,EAA9B1F,YAA+B,IAAlBC,EAAiB,EAAjBA,YAAiB,EAEZI,mBAAS,CACxClB,KAAM,GACNC,UAAW,GACXC,cAAe,GACfE,OAAO,KANoC,mBAErCoG,EAFqC,KAE3BC,EAF2B,KAUtClC,EAAW,SAAC7D,GACjB+F,EAAY,2BACRD,GADO,kBAET9F,EAAEmB,OAAO7B,KAAOU,EAAEmB,OAAO2C,UAKtBkB,EAAe,WACpB1E,EAAQwB,KAAK,cAIRxB,EAAUC,cAUhB,OACC,sBAAKZ,UAAWC,IAAOoG,SAAvB,UACC,oBAAIrG,UAAWC,IAAOoE,MAAtB,sCACA,qBAAKrE,UAAWC,IAAOqG,KAAvB,SAA6B,uBAAOtG,UAAWC,IAAOsG,MAAOpG,KAAK,OAAOR,KAAK,OAAOwE,MAAOgC,EAASxG,KAAMsF,YAAY,qBAAMf,SAAUA,MACvI,qBAAKlE,UAAWC,IAAOqG,KAAvB,SAA6B,uBAAOtG,UAAWC,IAAOsG,MAAOpG,KAAK,OAAOR,KAAK,YAAYwE,MAAOgC,EAASvG,UAAWqF,YAAY,qBAAMf,SAAUA,MACjJ,qBAAKlE,UAAWC,IAAOqG,KAAvB,SAA6B,uBAAOtG,UAAWC,IAAOsG,MAAOpG,KAAK,OAAOqG,IAAI,aAAaC,IAAI,aAAa9G,KAAK,gBAAgBuE,SAAUA,MAC1I,sBAAKlE,UAAWC,IAAOgD,UAAvB,UACC,wBAAQ9C,KAAK,SAASH,UAAWC,IAAOyG,cAAetG,QAASiF,EAAhE,0BACA,wBAAQlF,KAAK,SAASH,UAAWC,IAAO0G,UAAWvG,QAjBhC,WAClB+F,EAASxG,MAAQwG,EAASvG,WAC5Ba,EAAYmG,cAAcT,EAASxG,KAAKkH,QAAQ,MAAO,OAASV,GAChEd,KAEAT,MAAM,gDAYL,iCCZWkC,MA1Bf,YAA4C,IAA7BtG,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAC3B,OACC,mCACC,cAAC,IAAD,CAAYsG,SAAS,cAArB,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACC,cAAC,EAAD,CAAOzG,YAAaA,MAErB,cAAC,IAAD,CAAOyG,KAAK,QAAZ,SACC,cAAC,EAAD,CAAMzG,YAAaA,MAEpB,cAAC,IAAD,CAAOyG,KAAK,SAAZ,SACC,cAAC,EAAD,CAAOzG,YAAaA,MAErB,cAAC,IAAD,CAAOyG,KAAK,YAAZ,SACC,cAAC,EAAD,CAAUzG,YAAaA,EAAaC,YAAaA,MAElD,cAAC,IAAD,CAAOwG,KAAK,QAAZ,SACC,cAAC,EAAD,CAAMzG,YAAaA,EAAaC,YAAaA,c,wBCvB7CyG,EAAiB,CACtBC,OAAQC,0CACRC,WAAYD,kCACZE,UAAWF,kBACXG,YAAaH,wcAAYI,gCACzBC,cAAeL,wcAAYM,mCAMbC,EAFKC,IAASC,cAAcX,GCe5BY,E,uFAtBd,SAAQ5F,EAAO6F,GACd,OAAOJ,EAAYK,OAAOC,+BAA+B/F,EAAO6F,K,mBAIjE,SAAM7F,EAAO6F,GACZ,OAAOJ,EAAYK,OAAOE,2BAA2BhG,EAAO6F,K,0BAI7D,SAAaI,GACZR,EAAYK,OAAOI,oBAAmB,SAACtH,GACtCqH,EAAcrH,Q,oBAKhB,WACC6G,EAAYK,OAAOK,c,8BCrBRC,EAAWX,EAAYW,WAgCrBC,E,6FA5Bd,SAAc5I,EAAMwG,GACnBmC,EAASE,IAAT,oBAA0B7I,EAA1B,MAAmC8I,IAAItC,K,yBAIxC,SAAY9D,GAEXiG,EAASE,IAAT,cAA2BE,GAAG,QAA9B,uCAAuC,WAAOC,GAAP,eAAAC,EAAA,yDAChCC,EAAMF,EAASE,MADiB,KAEtCF,EAASE,OAF6B,qCAEbxG,EAAOwG,GAFM,2CAAvC,yD,2BAOD,SAAc3H,EAAWvB,EAAMyB,GAC9B,IAAM0H,EAAO,2BACT5H,EAAUvB,IADD,IAEZI,OAAQqB,IAETkH,EAASE,IAAT,oBAA0B7I,IAAQ0C,OAAOyG,K,wBAI1C,SAAWnJ,GACV2I,EAASE,IAAT,oBAA0B7I,IAAQoJ,a,KCtB9BvI,EAAc,IAAIsH,EAClBrH,EAAc,IAAI8H,EAExBS,IAASC,OACR,cAAC,IAAMC,WAAP,UACC,cAAC,EAAD,CAAK1I,YAAaA,EAAaC,YAAaA,MAE7C0I,SAASC,eAAe,U,kBCbzB5J,EAAOC,QAAU,CAAC,SAAW,2BAA2B,KAAO,uBAAuB,UAAY,4BAA4B,QAAU,0BAA0B,UAAY,4BAA4B,WAAa,6BAA6B,QAAU,0BAA0B,WAAa,6BAA6B,WAAa,6BAA6B,YAAc,8BAA8B,MAAQ,wBAAwB,UAAY,4BAA4B,SAAW,2BAA2B,QAAU,0BAA0B,SAAW,2BAA2B,UAAY,4BAA4B,KAAO,uBAAuB,OAAS,yBAAyB,MAAQ,2B","file":"static/js/main.4e800b74.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"makeWrap\":\"Make_makeWrap__3JyrP\",\"title\":\"Make_title__BRkW8\",\"form\":\"Make_form__1PVYh\",\"input\":\"Make_input__2NE7l\",\"buttonBox\":\"Make_buttonBox__37itK\",\"addButton\":\"Make_addButton__2LLfE\",\"addButtonPrev\":\"Make_addButtonPrev__2Nk1i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"joinWrap\":\"Join_joinWrap__3s1MB\",\"title\":\"Join_title__2D-mZ\",\"join_input\":\"Join_join_input___Z-l-\",\"submit\":\"Join_submit__32KVz\",\"home\":\"Join_home__1fOOg\",\"alertMessageError\":\"Join_alertMessageError__1nR-T\",\"alertMessageSccess\":\"Join_alertMessageSccess__vjQ1b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Login_title__fiWtY\",\"loginBox\":\"Login_loginBox__2Fc5f\",\"inputBox\":\"Login_inputBox__2Wca2\",\"submit\":\"Login_submit__T2hSO\",\"newjoin\":\"Login_newjoin__m-XbY\",\"errorMessage\":\"Login_errorMessage__2e5MF\"};","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport styles from \"./BookList.module.css\";\r\n\r\nconst BookList = ({ authService, dataService }) => {\r\n\tconst administrator = 'OcUzB7bg69SCTRMoktYumlOOaa03';\r\n\tconst history = useHistory();\r\n\tconst [user, setUser] = useState('');\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [tableLine, setTableLine] = useState({});\r\n\tconst [emailName, setEmailName] = useState(\"\");\r\n\tconst [currentBookName, setCurrentBookName] = useState([]);\r\n\r\n\t// 로그아웃\r\n\tconst onLogout = () => {\r\n\t\tauthService.logout();\r\n\t};\r\n\r\n\t// 체크박스 선택시 행 class add\r\n\t// 체크시 현재 선택된 도서의 name값을 넘겨줌.\r\n\tconst onCheck = (e, name) => {\r\n\t\te.target.closest(\"tr\").classList.toggle(styles.check);\r\n\t\tif (e.target.checked) {\r\n\t\t\tsetCurrentBookName([...currentBookName, name]);\r\n\t\t} else {\r\n\t\t\tsetCurrentBookName(currentBookName.filter((item) => item !== name));\r\n\t\t}\r\n\t};\r\n\r\n\t// 도서추가로 페이지이동\r\n\tconst onBookAdd = () => {\r\n\t\thistory.push(\"/Make\");\r\n\t};\r\n\r\n\t// 도서삭제\r\n\tconst onRemoveBook = () => {\r\n\t\tcurrentBookName?.map((item) => {\r\n\t\t\treturn dataService.removeData(item);\r\n\t\t});\r\n\t};\r\n\r\n\t// 빌려가기\r\n\tconst onRental =  () => {\r\n\t\tcurrentBookName?.map(key => {\r\n\t\t\tif(!tableLine[key]['rental']){\r\n\t\t\t\treturn dataService.getUpdateData(tableLine, key, emailName)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 반납하기\r\n\tconst onReturn = () => {\r\n\t\tcurrentBookName?.map(key => {\r\n\t\t\tif(tableLine[key]['rental'] === emailName || user.uid === administrator){\r\n\t\t\t\treturn dataService.getUpdateData(tableLine, key, '')\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 로그인 상태체크 및 user email 가져오기\r\n\tuseEffect(() => {\r\n\t\tauthService.onAuthChange((user) => {\r\n\t\t\tuser && setUser(user);\r\n\t\t\tsetEmailName(user?.email);\r\n\t\t\tif (!user) {\r\n\t\t\t\thistory.push(\"/\");\r\n\t\t\t}\r\n\t\t});\r\n\t}, [authService, history, currentBookName]);\r\n\r\n\t// 페이지 처음 로딩시 데이터 가져오기\r\n\tuseEffect(() => {\r\n\t\tdataService.getUserData((update) => {\r\n\t\t\tsetTableLine(update);\r\n\t\t\tsetIsLoading(true);\r\n\t\t});\r\n\t}, [dataService, isLoading]);\r\n\r\n\treturn (\r\n\t\t<section className={styles.booklist}>\r\n\t\t\t{emailName !== null && (\r\n\t\t\t\t<h1 className={styles.user}>\r\n\t\t\t\t\t<span>{emailName}</span> 님 환영합니다. 😊\r\n\t\t\t\t</h1>\r\n\t\t\t)}\r\n\t\t\t<h2 className={styles.system}>📖 도서관리 시스템 </h2>\r\n\t\t\t<div className={styles.bookBox}>\r\n\t\t\t\t<table className={styles.bookListTbl}>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th className={styles.checked}></th>\r\n\t\t\t\t\t\t\t<th className={styles.bookName}>책이름</th>\r\n\t\t\t\t\t\t\t<th className={styles.publisher}>출판사</th>\r\n\t\t\t\t\t\t\t<th className={styles.date}>발행일</th>\r\n\t\t\t\t\t\t\t<th className={styles.status}>대여여부</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading &&\r\n\t\t\t\t\t\t\tObject.keys(tableLine)?.map((key) => {\r\n\t\t\t\t\t\t\t\tconst { name, publisher, publisherDate, rental } = tableLine[key];\r\n\t\t\t\t\t\t\t\treturn <TableList key={key} name={name} publisher={publisher} publisherDate={publisherDate} rental={rental} emailName={emailName} onCheck={onCheck} />;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.buttonBox}>\r\n\t\t\t\t<button type=\"button\" className={styles.rentalBook} onClick={onRental}>\r\n\t\t\t\t\t🛒 빌려가기\r\n\t\t\t\t</button>\r\n\t\t\t\t<button type=\"button\" className={styles.returnBook} onClick={onReturn}>\r\n\t\t\t\t\t🔄 반납하기\r\n\t\t\t\t</button>\r\n\t\t\t\t\t{user.uid === administrator && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<button type=\"button\" className={styles.addBook} onClick={onBookAdd}>📌 도서추가</button>\r\n\t\t\t\t\t\t<button type=\"button\" className={styles.removeBook} onClick={onRemoveBook}>❌ 도서삭제</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t<button type=\"button\" className={styles.logoutBox} onClick={onLogout}>\r\n\t\t\t\t\t🔴 로그아웃\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nconst TableList = ({ name, publisher, publisherDate, onCheck, rental }) => {\r\n\treturn (\r\n\t\t<tr>\r\n\t\t\t<td>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName={styles.checkbox}\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tname=\"check\"\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\tonCheck(e, name);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</td>\r\n\t\t\t<td>{name}</td>\r\n\t\t\t<td>{publisher}</td>\r\n\t\t\t<td>{publisherDate}</td>\r\n\t\t\t<td>\r\n\t\t\t\t<span className={styles.stateBook}>{rental && `✔ ${rental}`}</span>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\nexport default BookList;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport styles from \"./Join.module.css\";\r\n\r\nconst Join = ({ authService }) => {\r\n\tconst history = useHistory();\r\n\tconst goToHome = () => {\r\n\t\thistory.push(\"/\");\r\n\t};\r\n\tconst [joinUser, setJoinUser] = useState({\r\n\t\tjoinID: \"\",\r\n\t\tjoinPW: \"\",\r\n\t});\r\n\r\n\tconst [alertMsg, setAlertMsg] = useState(\"\");\r\n\r\n\tconst onChange = (e) => {\r\n\t\tsetJoinUser({\r\n\t\t\t...joinUser,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst onSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tauthService\r\n\t\t\t.newJoin(joinUser.joinID, joinUser.joinPW)\r\n\t\t\t.then((data) => {\r\n\t\t\t\talert(\"Success full\");\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tsetAlertMsg(error.message);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={styles.joinWrap}>\r\n\t\t\t\t<h1 className={styles.title}>회원가입</h1>\r\n\t\t\t\t<button type=\"button\" className={styles.home} onClick={goToHome}>\r\n\t\t\t\t\t홈으로\r\n\t\t\t\t</button>\r\n\t\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t\t<div className={styles.join_input}>\r\n\t\t\t\t\t\t<input placeholder=\"EMAIL\" type=\"text\" name=\"joinID\" onChange={onChange} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.join_input}>\r\n\t\t\t\t\t\t<input placeholder=\"PASSWORD\" type=\"password\" name=\"joinPW\" onChange={onChange} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.alertMessageError}>{alertMsg}</div>\r\n\t\t\t\t\t<button type=\"submit\" className={styles.submit}>\r\n\t\t\t\t\t\t회원가입\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Join;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport styles from \"./Login.module.css\";\r\n\r\nconst Login = ({ authService }) => {\r\n\tconst [alertMsg, setAlertMsg] = useState('');\r\n\tconst history = useHistory();\r\n\tconst goToBookList = (userId) => {\r\n\t\thistory.push({\r\n\t\t\tpathname: \"/BookList\",\r\n\t\t\tstate: { id: userId },\r\n\t\t});\r\n\t};\r\n\r\n\tconst goToJoin = () => {\r\n\t\thistory.push(\"/Join\");\r\n\t};\r\n\r\n\tconst [value, setValue] = useState({\r\n\t\tuserId: \"\",\r\n\t\tuserPassword: \"\",\r\n\t});\r\n\r\n\tconst onChange = (event) => {\r\n\t\tsetValue({\r\n\t\t\t...value,\r\n\t\t\t[event.target.name]: event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst onLogin = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tauthService.login(value.userId, value.userPassword).then((data) => goToBookList(data.user.uid)).catch(error => {\r\n\t\t\tsetAlertMsg(error.message);\r\n\t\t});\r\n\t};\r\n\r\n\t// 로그인유지하기\r\n\tuseEffect(() => {\r\n\t\tauthService.onAuthChange((user) => {\r\n\t\t\tuser && goToBookList(user.uid);\r\n\t\t});\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1 className={styles.title}>📔 Book Store</h1>\r\n\t\t\t<div className={styles.loginBox}>\r\n\t\t\t\t<form onSubmit={onLogin}>\r\n\t\t\t\t\t<div className={styles.inputBox}>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"ID\" name=\"userId\" value={value.userId} onChange={onChange} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.inputBox}>\r\n\t\t\t\t\t\t<input type=\"password\" placeholder=\"PASSWORD\" name=\"userPassword\" value={value.userPassword} onChange={onChange} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className={styles.errorMessage}>{alertMsg}</p>\r\n\t\t\t\t\t<button type=\"submit\" className={styles.submit}>\r\n\t\t\t\t\t\t로그인\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"button\" className={styles.newjoin} onClick={goToJoin}>\r\n\t\t\t\t회원가입\r\n\t\t\t</button>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React, {useState} from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport styles from './Make.module.css';\r\n\r\nconst Make = ({authService, dataService}) => {\r\n\t// 도서추가\r\n\tconst [bookData, setBookData] = useState({\r\n\t\tname: \"\",\r\n\t\tpublisher: \"\",\r\n\t\tpublisherDate: \"\",\r\n\t\trental:'',\r\n\t});\r\n\r\n\t// name값에 대한 value를 지정 후 bookData에 저장.\r\n\tconst onChange = (e) => {\r\n\t\tsetBookData({\r\n\t\t\t...bookData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\t// 도서목록으로 이동하기\r\n\tconst goToBookList = () => {\r\n\t\thistory.push('/BookList');\r\n\t}\r\n\r\n\t// DB에 값 저장하기 후 페이지 이동.\r\n\tconst history = useHistory();\r\n\tconst writeDatabase = () => {\r\n\t\tif(bookData.name && bookData.publisher ){\r\n\t\t\tdataService.writeUserData(bookData.name.replace(/\\./g, '%2E'),  bookData);\r\n\t\t\tgoToBookList();\r\n\t\t} else {\r\n\t\t\talert('값을 입력하세요')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={styles.makeWrap}>\r\n\t\t\t<h1 className={styles.title}>도서추가</h1>\r\n\t\t\t<div className={styles.form}><input className={styles.input} type=\"text\" name=\"name\" value={bookData.name} placeholder=\"책이름\" onChange={onChange} /></div>\r\n\t\t\t<div className={styles.form}><input className={styles.input} type=\"text\" name=\"publisher\" value={bookData.publisher} placeholder=\"출판사\" onChange={onChange} /></div>\r\n\t\t\t<div className={styles.form}><input className={styles.input} type=\"date\" min=\"1950-01-01\" max=\"9999-12-31\" name=\"publisherDate\" onChange={onChange} /></div>\r\n\t\t\t<div className={styles.buttonBox}>\r\n\t\t\t\t<button type=\"button\" className={styles.addButtonPrev} onClick={goToBookList}>이전</button>\r\n\t\t\t\t<button type=\"button\" className={styles.addButton} onClick={writeDatabase}>추가</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Make\r\n","import React from \"react\";\r\nimport { HashRouter, BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport BookList from \"./components/BookList/BookList\";\r\nimport Join from \"./components/Join/Join\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Make from \"./components/Make/Make\";\r\n\r\nfunction App({ authService, dataService }) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<HashRouter basename=\"/bookSystem\">\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t<Login authService={authService} />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/Join\">\r\n\t\t\t\t\t\t<Join authService={authService} />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/Login\">\r\n\t\t\t\t\t\t<Login authService={authService} />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/BookList\">\r\n\t\t\t\t\t\t<BookList authService={authService} dataService={dataService} />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/Make\">\r\n\t\t\t\t\t\t<Make authService={authService} dataService={dataService} />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</HashRouter>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tdatabaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebaseApp;\r\n","import firebaseApp from \"./firebase\";\r\n\r\nclass AuthService {\r\n\t// Join\r\n\tnewJoin(email, password) {\r\n\t\treturn firebaseApp.auth().createUserWithEmailAndPassword(email, password);\r\n\t}\r\n\r\n\t// Login\r\n\tlogin(email, password) {\r\n\t\treturn firebaseApp.auth().signInWithEmailAndPassword(email, password);\r\n\t}\r\n\r\n\t// onAuthChange Check\r\n\tonAuthChange(onUserChanged) {\r\n\t\tfirebaseApp.auth().onAuthStateChanged((user) => {\r\n\t\t\tonUserChanged(user);\r\n\t\t});\r\n\t}\r\n\r\n\t// Logout\r\n\tlogout() {\r\n\t\tfirebaseApp.auth().signOut();\r\n\t}\r\n}\r\n\r\nexport default AuthService;\r\n","import firebaseApp from \"./firebase\";\r\nexport const database = firebaseApp.database();\r\n\r\nclass DataService {\r\n\t// write\r\n\twriteUserData(name, bookData) {\r\n\t\tdatabase.ref(`bookStore/${name}/`).set(bookData);\r\n\t}\r\n\r\n\t// getData loading\r\n\tgetUserData(update) {\r\n\t\t// return database.ref(`bookStore/`).once(\"value\");\r\n\t\tdatabase.ref(`bookStore/`).on(\"value\", async (snapshot) => {\r\n\t\t\tconst val = snapshot.val();\r\n\t\t\tsnapshot.val() && (await update(val));\r\n\t\t});\r\n\t}\r\n\r\n\t// update\r\n\tgetUpdateData(tableLine, name, emailName) {\r\n\t\tconst updates = {\r\n\t\t\t...tableLine[name],\r\n\t\t\trental: emailName,\r\n\t\t};\r\n\t\tdatabase.ref(`bookStore/${name}`).update(updates);\r\n\t}\r\n\r\n\t// remove\r\n\tremoveData(name) {\r\n\t\tdatabase.ref(`bookStore/${name}`).remove();\r\n\t}\r\n}\r\n\r\nexport default DataService;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport AuthService from \"./service/auth_service\";\r\nimport DataService from \"./service/db\";\r\n\r\nconst authService = new AuthService();\r\nconst dataService = new DataService();\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App authService={authService} dataService={dataService} />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"booklist\":\"BookList_booklist__Jrp1Y\",\"user\":\"BookList_user__tB0ez\",\"buttonBox\":\"BookList_buttonBox__p1ctL\",\"bookBox\":\"BookList_bookBox__ZaYa7\",\"logoutBox\":\"BookList_logoutBox__3UMsr\",\"removeBook\":\"BookList_removeBook__1eTI0\",\"addBook\":\"BookList_addBook__33MpW\",\"returnBook\":\"BookList_returnBook__aEWNm\",\"rentalBook\":\"BookList_rentalBook__3pqws\",\"bookListTbl\":\"BookList_bookListTbl__3AyR1\",\"check\":\"BookList_check__1vOAW\",\"stateBook\":\"BookList_stateBook__2epN1\",\"checkbox\":\"BookList_checkbox__2Xu76\",\"checked\":\"BookList_checked__1Fuv6\",\"bookName\":\"BookList_bookName__2ScnI\",\"publisher\":\"BookList_publisher__WSf8b\",\"date\":\"BookList_date__199KK\",\"status\":\"BookList_status__3Qewm\",\"input\":\"BookList_input__35N6A\"};"],"sourceRoot":""}